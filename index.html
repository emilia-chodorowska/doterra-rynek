<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rynek doTERRA w Europie ‚Äî Analiza dla Aromagic</title>
  <meta name="description" content="Rozk≈Çad lider√≥w doTERRA w Europie per kraj i ranga. Dane z oficjalnych stron doTERRA, luty 2026.">
  <meta property="og:title" content="Rynek doTERRA w Europie">
  <meta property="og:description" content="Rozk≈Çad 3160 lider√≥w Silver+ w 34 krajach europejskich.">
  <meta property="og:image" content="https://emilia-chodorowska.github.io/doterra-rynek/social-preview.png">
  <meta property="og:type" content="website">
  <link rel="icon" href="favicon.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --text: #111827;
      --text-secondary: #6B7280;
      --text-muted: #9CA3AF;
      --bg: #ffffff;
      --bg-soft: #F9FAFB;
      --border: #E5E7EB;
      --purple: #7E57C2;
      --purple-soft: #F3EEFA;
      --purple-mid: #EDE5F7;
      --green: #4CAF50;
      --green-soft: #E8F5E9;
      --blue: #2196F3;
      --blue-soft: #E3F2FD;
      --amber: #FF9800;
      --amber-soft: #FFF3E0;
      --rose: #E91E63;
      --nav-h: 64px;
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      color: var(--text);
      background: var(--bg);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    a { text-decoration: none; color: inherit; }
    img { max-width: 100%; display: block; }

    .w { max-width: 1080px; margin: 0 auto; padding: 0 24px; }

    /* NAV */
    .nav {
      position: fixed; top: 0; left: 0; right: 0;
      height: var(--nav-h); z-index: 100;
      background: rgba(255,255,255,0.92);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border);
    }
    .nav-inner {
      max-width: 1080px; margin: 0 auto; padding: 0 24px;
      height: 100%; display: flex; align-items: center; justify-content: space-between;
    }
    .nav-logo { display: flex; align-items: center; gap: 10px; }
    .nav-logo img { height: 32px; width: auto; }
    .nav-logo span { font-size: 1.125rem; font-weight: 700; letter-spacing: -0.02em; }
    .nav-links { display: flex; align-items: center; gap: 28px; }
    .nav-links a { font-size: 0.875rem; font-weight: 500; color: var(--text-secondary); transition: color 0.15s; }
    .nav-links a:hover { color: var(--text); }
    .nav-tag {
      font-size: 0.7rem; font-weight: 600; color: var(--purple);
      background: var(--purple-soft); padding: 2px 8px; border-radius: 100px;
    }

    /* HERO */
    .hero {
      padding: calc(var(--nav-h) + 72px) 0 64px;
      text-align: center;
    }
    .hero-label {
      display: inline-block; font-size: 0.8rem; font-weight: 600;
      color: var(--purple); background: var(--purple-soft);
      padding: 4px 14px; border-radius: 100px; margin-bottom: 24px;
    }
    .hero h1 {
      font-size: 2.75rem; font-weight: 800; letter-spacing: -0.035em;
      line-height: 1.15; max-width: 700px; margin: 0 auto 16px;
    }
    .hero-sub {
      font-size: 1.05rem; color: var(--text-secondary);
      max-width: 560px; margin: 0 auto 0;
    }

    /* SECTIONS */
    section { padding: 72px 0; }
    .bg-soft { background: var(--bg-soft); }

    .section-label {
      font-size: 0.7rem; font-weight: 600; text-transform: uppercase;
      letter-spacing: 0.1em; color: var(--purple); margin-bottom: 10px;
    }
    .section-head { margin-bottom: 48px; }
    .section-head h2 { font-size: 1.75rem; font-weight: 700; letter-spacing: -0.025em; line-height: 1.25; }
    .section-head p { margin-top: 10px; font-size: 0.95rem; color: var(--text-secondary); max-width: 560px; }
    .section-head--center { text-align: center; }
    .section-head--center p { margin-left: auto; margin-right: auto; }

    /* STAT CARDS */
    .stats-row {
      display: grid; grid-template-columns: repeat(4, 1fr);
      gap: 1px; background: var(--border);
      border: 1px solid var(--border); border-radius: 12px; overflow: hidden;
    }
    .stat-card {
      padding: 28px 24px; background: var(--bg); text-align: center;
    }
    .stat-value {
      font-size: 2rem; font-weight: 800; letter-spacing: -0.03em;
      line-height: 1.1; margin-bottom: 4px;
    }
    .stat-value.purple { color: var(--purple); }
    .stat-value.green { color: var(--green); }
    .stat-value.blue { color: var(--blue); }
    .stat-value.amber { color: var(--amber); }
    .stat-label { font-size: 0.78rem; color: var(--text-secondary); font-weight: 500; }

    /* BAR CHART */
    .chart { margin-bottom: 16px; }
    .chart-tabs {
      display: flex; gap: 8px; margin-bottom: 24px;
    }
    .chart-tab {
      padding: 8px 20px; border: 1px solid var(--border); border-radius: 6px;
      background: var(--bg); font-size: 0.85rem; font-weight: 600;
      cursor: pointer; transition: all 0.2s;
    }
    .chart-tab:hover { border-color: var(--purple); color: var(--purple); }
    .chart-tab.active {
      background: var(--purple); color: #fff; border-color: var(--purple);
    }
    .chart-row {
      display: grid; grid-template-columns: 100px 1fr 50px;
      align-items: center; gap: 12px; margin-bottom: 6px;
    }
    .chart-total {
      margin-top: 10px; padding-top: 10px;
      border-top: 1px solid var(--border);
    }
    .chart-total .chart-country,
    .chart-total .chart-val { font-weight: 700; }
    .chart-country {
      font-size: 0.82rem; font-weight: 600; text-align: right;
      white-space: nowrap;
    }
    .chart-bar-wrap {
      height: 28px; background: var(--bg-soft);
      border-radius: 6px; overflow: hidden; position: relative;
      border: 1px solid var(--border);
    }
    .chart-bar {
      height: 100%; border-radius: 5px;
      transition: width 1s cubic-bezier(0.22, 1, 0.36, 1);
      width: 0;
    }
    .chart-bar.de { background: var(--purple); }
    .chart-bar.ro { background: #5C6BC0; }
    .chart-bar.ch { background: #26A69A; }
    .chart-bar.pl { background: var(--green); }
    .chart-bar.hu { background: var(--amber); }
    .chart-bar.at { background: #EF5350; }
    .chart-bar.it { background: #42A5F5; }
    .chart-bar.fr { background: #AB47BC; }
    .chart-bar.es { background: #FF7043; }
    .chart-bar.be { background: #8D6E63; }
    .chart-bar.gb { background: #EC407A; }
    .chart-bar.il { background: #66BB6A; }
    .chart-bar.sk { background: #29B6F6; }
    .chart-bar.nl { background: #26C6DA; }
    .chart-bar.bg { background: #78909C; }
    .chart-bar.no { background: #1E88E5; }
    .chart-bar.other { background: #BDBDBD; }
    .chart-val {
      font-size: 0.78rem; font-weight: 600; color: var(--text-secondary);
      white-space: nowrap;
    }
    .chart-legend {
      display: flex; flex-wrap: wrap; gap: 16px; margin-top: 20px;
      justify-content: center;
    }
    .chart-legend-item {
      display: flex; align-items: center; gap: 6px;
      font-size: 0.75rem; color: var(--text-secondary); font-weight: 500;
    }
    .chart-legend-dot {
      width: 10px; height: 10px; border-radius: 3px; flex-shrink: 0;
    }

    /* STACKED CHART */
    .stacked-row {
      display: grid; grid-template-columns: 100px 1fr 50px;
      align-items: center; gap: 12px; margin-bottom: 6px;
    }
    .stacked-country {
      font-size: 0.82rem; font-weight: 600; text-align: right;
      white-space: nowrap;
    }
    .stacked-bar {
      display: flex; height: 28px; border-radius: 6px; overflow: hidden;
      border: 1px solid var(--border); background: var(--bg-soft);
    }
    .stacked-seg {
      height: 100%; transition: width 1s cubic-bezier(0.22, 1, 0.36, 1);
      width: 0;
    }
    .stacked-seg.silver { background: #90CAF9; }
    .stacked-seg.gold { background: #FFD54F; }
    .stacked-seg.platinum { background: #CE93D8; }
    .stacked-seg.diamond { background: #7E57C2; }
    .stacked-seg.inne { background: #BDBDBD; }
    .stacked-val {
      font-size: 0.78rem; font-weight: 600; color: var(--text-secondary);
      white-space: nowrap;
    }
    .stacked-total {
      margin-top: 10px; padding-top: 10px;
      border-top: 1px solid var(--border);
    }
    .stacked-total .stacked-country,
    .stacked-total .stacked-val { font-weight: 700; }
    .row-tooltip {
      position: relative; cursor: pointer;
    }
    .row-tooltip .tooltip-box {
      display: none; position: absolute; bottom: calc(100% + 8px); left: 120px;
      background: #78909C; color: #fff; padding: 10px 14px;
      border-radius: 8px; font-size: 0.75rem; line-height: 1.6;
      white-space: nowrap; z-index: 10;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .row-tooltip .tooltip-box::after {
      content: ''; position: absolute; top: 100%; left: 20px;
      border: 6px solid transparent; border-top-color: #78909C;
    }
    .row-tooltip:hover .tooltip-box { display: block; }
    .stacked-legend {
      display: flex; flex-wrap: wrap; gap: 16px; margin-top: 20px;
      justify-content: center;
    }
    .stacked-legend-item {
      display: flex; align-items: center; gap: 6px;
      font-size: 0.78rem; color: var(--text-secondary);
    }
    .stacked-legend-dot {
      width: 10px; height: 10px; border-radius: 3px; flex-shrink: 0;
    }

    /* TABLES */
    .table-wrap {
      border: 1px solid var(--border); border-radius: 12px; overflow: hidden;
    }
    table {
      width: 100%; border-collapse: collapse; font-size: 0.82rem;
    }
    thead { background: var(--bg-soft); }
    th {
      padding: 12px 16px; text-align: left; font-weight: 600;
      font-size: 0.72rem; text-transform: uppercase; letter-spacing: 0.06em;
      color: var(--text-secondary); border-bottom: 1px solid var(--border);
    }
    th.r, td.r { text-align: right; }
    td {
      padding: 11px 16px; border-bottom: 1px solid var(--border);
      color: var(--text);
    }
    tbody tr:last-child td { border-bottom: none; }
    tbody tr:hover { background: var(--bg-soft); }
    .row-highlight { background: var(--purple-soft) !important; }
    .row-highlight:hover { background: var(--purple-mid) !important; }
    .badge {
      display: inline-block; font-size: 0.68rem; font-weight: 600;
      padding: 2px 8px; border-radius: 100px;
    }
    .badge-pl { background: var(--green-soft); color: #2E7D32; }
    .badge-de { background: var(--purple-soft); color: #5E35B1; }
    .badge-ro { background: var(--blue-soft); color: #1565C0; }
    .badge-later { background: #F5F5F5; color: #757575; }

    /* PYRAMID */
    .pyramids {
      display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;
    }
    .pyramid-card {
      border: 1px solid var(--border); border-radius: 12px;
      padding: 28px 24px; background: var(--bg);
    }
    .pyramid-card h3 {
      font-size: 1rem; font-weight: 700; margin-bottom: 4px;
      display: flex; align-items: center; gap: 8px;
    }
    .pyramid-card .sub {
      font-size: 0.78rem; color: var(--text-secondary); margin-bottom: 20px;
    }
    .pyr-row {
      display: flex; align-items: center; gap: 10px;
      margin-bottom: 8px;
    }
    .pyr-label {
      font-size: 0.72rem; font-weight: 600; width: 70px;
      text-align: right; color: var(--text-secondary); flex-shrink: 0;
    }
    .pyr-bar-wrap {
      flex: 1; height: 22px; background: var(--bg-soft);
      border-radius: 4px; overflow: hidden; border: 1px solid var(--border);
    }
    .pyr-bar {
      height: 100%; border-radius: 3px;
      transition: width 1s cubic-bezier(0.22, 1, 0.36, 1);
      display: flex; align-items: center; justify-content: flex-end;
      padding-right: 6px; font-size: 0.68rem; font-weight: 700; color: #fff;
      min-width: 32px;
    }
    .pyr-bar.gold { background: #FFB300; color: #5D4037; }
    .pyr-bar.plat { background: #78909C; }
    .pyr-bar.dia { background: #90CAF9; color: #1565C0; }
    .pyr-bar.bdia { background: var(--purple); }

    /* SEGMENT CARDS */
    .segments {
      display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;
    }
    .segment {
      border: 1px solid var(--border); border-radius: 12px;
      padding: 28px 24px; background: var(--bg); position: relative;
      overflow: hidden;
    }
    .segment-phase {
      font-size: 0.68rem; font-weight: 700; text-transform: uppercase;
      letter-spacing: 0.08em; margin-bottom: 8px;
    }
    .segment-phase.now { color: var(--green); }
    .segment-phase.next { color: var(--purple); }
    .segment-phase.later { color: var(--text-muted); }
    .segment h3 { font-size: 1.1rem; font-weight: 700; margin-bottom: 6px; }
    .segment .pct {
      font-size: 2.25rem; font-weight: 800; letter-spacing: -0.03em;
      margin-bottom: 8px; line-height: 1;
    }
    .segment .pct.green { color: var(--green); }
    .segment .pct.purple { color: var(--purple); }
    .segment .pct.muted { color: var(--text-muted); }
    .segment p { font-size: 0.82rem; color: var(--text-secondary); line-height: 1.6; }
    .segment ul {
      list-style: none; margin-top: 12px;
    }
    .segment li {
      font-size: 0.8rem; color: var(--text-secondary); padding: 3px 0;
      padding-left: 14px; position: relative;
    }
    .segment li::before {
      content: ''; position: absolute; left: 0; top: 10px;
      width: 5px; height: 5px; border-radius: 50%; background: var(--border);
    }

    /* TIMELINE */
    .timeline {
      position: relative; padding-left: 32px;
    }
    .timeline::before {
      content: ''; position: absolute; left: 7px; top: 8px; bottom: 8px;
      width: 1px; background: var(--border);
    }
    .tl-item {
      position: relative; margin-bottom: 20px;
    }
    .tl-dot {
      position: absolute; left: -32px; top: 6px;
      width: 15px; height: 15px; border-radius: 50%;
      background: var(--bg); border: 2px solid var(--border);
    }
    .tl-dot.active { border-color: var(--purple); background: var(--purple-soft); }
    .tl-year {
      font-size: 0.72rem; font-weight: 700; color: var(--purple);
      margin-bottom: 2px;
    }
    .tl-text { font-size: 0.85rem; color: var(--text-secondary); }
    .tl-text strong { color: var(--text); font-weight: 600; }

    /* KEY INSIGHT */
    .insight {
      border: 2px solid var(--purple);
      border-radius: 12px; padding: 32px; text-align: center;
      background: var(--purple-soft);
    }
    .insight h3 {
      font-size: 1.1rem; font-weight: 700; margin-bottom: 8px;
      color: var(--purple);
    }
    .insight p { font-size: 0.92rem; color: var(--text); max-width: 640px; margin: 0 auto; }
    .insight .big {
      font-size: 2.5rem; font-weight: 800; color: var(--purple);
      letter-spacing: -0.03em; line-height: 1; margin: 12px 0;
    }

    /* NOTE */
    .note {
      font-size: 0.75rem; color: var(--text-muted); margin-top: 16px;
      line-height: 1.5;
    }
    .note a { color: var(--purple); text-decoration: underline; }

    /* FOOTER */
    .footer { padding: 32px 0; border-top: 1px solid var(--border); }
    .footer-inner {
      display: flex; justify-content: space-between; align-items: center;
      font-size: 0.8rem; color: var(--text-muted);
    }

    /* ANIMATIONS */
    .anim {
      opacity: 0; transform: translateY(16px);
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .anim.in { opacity: 1; transform: none; }

    /* RESPONSIVE */
    @media (max-width: 768px) {
      .nav-links { display: none; }
      .hero { padding: calc(var(--nav-h) + 40px) 0 48px; }
      .hero h1 { font-size: 1.75rem; }
      section { padding: 48px 0; }
      .stats-row { grid-template-columns: repeat(2, 1fr); }
      .pyramids, .segments { grid-template-columns: 1fr; }
      .chart-row { grid-template-columns: 72px 1fr 80px; }
      .stacked-row { grid-template-columns: 72px 1fr 45px; }
      .table-wrap { overflow-x: auto; }
      table { min-width: 600px; }
    }
  </style>
</head>
<body>

  <!-- NAV -->
  <nav class="nav">
    <div class="nav-inner">
      <a href="index.html" class="nav-logo">
        <img src="logo.png" alt="Aromagic">
      </a>
      <div class="nav-links">
        <a href="#company">Firma</a>
        <a href="#market">Rynek</a>
        <a href="#pyramid">Piramida rang</a>
        <a href="#strategy">Strategia</a>
        <span class="nav-tag">Wewnƒôtrzna</span>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <section class="hero">
    <div class="w">
      <div class="hero-label">Analiza rynku / luty 2026</div>
      <h1>Rynek doTERRA w&nbsp;Europie</h1>
      <p class="hero-sub">Rozk≈Çad 3160 lider√≥w Silver+ w 34 krajach europejskich. Dane z oficjalnych stron doTERRA recognition.</p>
    </div>
  </section>

  <!-- GLOBAL STATS -->
  <section class="bg-soft" id="company">
    <div class="w">
      <div class="section-head section-head--center anim">
        <div class="section-label">doTERRA globalnie</div>
        <h2>Firma w liczbach</h2>
        <p>Najwiƒôksza firma olejk√≥w eterycznych na ≈õwiecie. Za≈Ço≈ºona 2008, Pleasant Grove, Utah.</p>
      </div>
      <div class="stats-row anim">
        <div class="stat-card">
          <div class="stat-value purple">>$2 mld</div>
          <div class="stat-label">Przych√≥d 2024</div>
        </div>
        <div class="stat-card">
          <div class="stat-value green">10M+</div>
          <div class="stat-label">Klient√≥w globalnie</div>
        </div>
        <div class="stat-card">
          <div class="stat-value blue">3M+</div>
          <div class="stat-label">Wellness Advocates</div>
        </div>
        <div class="stat-card">
          <div class="stat-value amber">155+</div>
          <div class="stat-label">Kraj√≥w</div>
        </div>
      </div>
      <p class="note" style="text-align:center;">≈πr√≥d≈Ço: doTERRA Jumpstart 2025, Business for Home, Direct Selling News</p>
    </div>
  </section>

  <!-- EUROPE STATS -->
  <section>
    <div class="w">
      <div class="section-head section-head--center anim">
        <div class="section-label">doTERRA Europa</div>
        <h2>41 rynk√≥w europejskich</h2>
        <p>Biuro w Monachium (2019), fabryka w Cork (2020), call center w Budapeszcie (2020). Konwencja 2026 w Katowicach.</p>
      </div>
      <div class="stats-row anim">
        <div class="stat-card">
          <div class="stat-value purple">3 160</div>
          <div class="stat-label">Lider√≥w Silver+ ≈ÇƒÖcznie</div>
        </div>
        <div class="stat-card">
          <div class="stat-value green">1 240</div>
          <div class="stat-label">w tym Gold+</div>
        </div>
        <div class="stat-card">
          <div class="stat-value blue">284</div>
          <div class="stat-label">w tym Diamond+</div>
        </div>
        <div class="stat-card">
          <div class="stat-value amber">34</div>
          <div class="stat-label">Kraje z liderami</div>
        </div>
      </div>
    </div>
  </section>

  <!-- RANK CHART -->
  <section class="bg-soft" id="market">
    <div class="w">
      <div class="section-head anim">
        <div class="section-label" id="chartLabel">Rozk≈Çad Gold+</div>
        <h2>Niemcy dominujƒÖ. Rumunia zaskakuje.</h2>
        <p id="chartDesc">3157 lider√≥w Silver+.</p>
      </div>

      <div class="chart-tabs">
        <button class="chart-tab active" data-rank="silver">Silver+</button>
        <button class="chart-tab" data-rank="gold">Gold+</button>
        <button class="chart-tab" data-rank="platinum">Platinum+</button>
        <button class="chart-tab" data-rank="diamond">Diamond+</button>
      </div>

      <div class="chart anim" id="rankChart"></div>

      <p class="note" id="chartNote">≈πr√≥d≈Ço: doterra.com/ME/en_ME ‚Äî strony Recognition. Dane pobrane luty 2026.</p>
    </div>
  </section>

  <!-- STACKED CHART -->
  <section>
    <div class="w">
      <div class="section-head anim">
        <div class="section-label">Struktura rang</div>
        <h2>Podzia≈Ç rang w ka≈ºdym kraju</h2>
        <p>Jak wyglƒÖda piramida Silver ‚Üí Gold ‚Üí Platinum ‚Üí Diamond+ per kraj.</p>
      </div>

      <div class="anim" id="stackedChart"></div>

      <div class="stacked-legend">
        <div class="stacked-legend-item"><span class="stacked-legend-dot" style="background:#90CAF9"></span> Silver (est.)</div>
        <div class="stacked-legend-item"><span class="stacked-legend-dot" style="background:#FFD54F"></span> Gold (est.)</div>
        <div class="stacked-legend-item"><span class="stacked-legend-dot" style="background:#CE93D8"></span> Platinum</div>
        <div class="stacked-legend-item"><span class="stacked-legend-dot" style="background:#7E57C2"></span> Diamond+</div>
      </div>

      <p class="note">Silver/Gold: estymacja z analizy nazwisk (Silver ¬±15-20%, Gold ¬±10-15%). Platinum/Diamond+: dane pewne z oficjalnych stron doTERRA.</p>
    </div>
  </section>

  <!-- FULL TABLE -->
  <section>
    <div class="w">
      <div class="section-head anim">
        <div class="section-label">Szczeg√≥≈Çy Gold+</div>
        <h2>Rozk≈Çad per ranga i kraj</h2>
      </div>

      <div class="table-wrap anim">
        <table>
          <thead>
            <tr>
              <th>Kraj</th>
              <th class="r">Gold</th>
              <th class="r">Platinum</th>
              <th class="r">Diamond</th>
              <th class="r">Blue Dia.</th>
              <th class="r">Pres.Dia.+</th>
              <th class="r">Razem</th>
              <th class="r">%</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>üá©üá™ <strong>Niemcy</strong></td><td class="r">251</td><td class="r">79</td><td class="r">62</td><td class="r">14</td><td class="r">6</td><td class="r"><strong>412</strong></td><td class="r"><strong>33.3%</strong></td></tr>
            <tr><td>üá∑üá¥ <strong>Rumunia</strong></td><td class="r">128</td><td class="r">56</td><td class="r">35</td><td class="r">12</td><td class="r">7</td><td class="r"><strong>238</strong></td><td class="r"><strong>19.2%</strong></td></tr>
            <tr><td>üá≠üá∫ Wƒôgry</td><td class="r">62</td><td class="r">12</td><td class="r">12</td><td class="r">4</td><td class="r">1</td><td class="r"><strong>91</strong></td><td class="r">7.4%</td></tr>
            <tr class="row-highlight"><td>üáµüá± <strong>Polska</strong></td><td class="r">46</td><td class="r">17</td><td class="r">10</td><td class="r">5</td><td class="r">0</td><td class="r"><strong>78</strong></td><td class="r"><strong>6.3%</strong></td></tr>
            <tr><td>üáÆüáπ W≈Çochy</td><td class="r">41</td><td class="r">10</td><td class="r">6</td><td class="r">3</td><td class="r">0</td><td class="r"><strong>60</strong></td><td class="r">4.9%</td></tr>
            <tr><td>üá®üá≠ Szwajcaria</td><td class="r">16</td><td class="r">11</td><td class="r">24</td><td class="r">1</td><td class="r">3</td><td class="r"><strong>55</strong></td><td class="r">4.4%</td></tr>
            <tr><td>üá´üá∑ Francja</td><td class="r">34</td><td class="r">6</td><td class="r">4</td><td class="r">2</td><td class="r">0</td><td class="r"><strong>46</strong></td><td class="r">3.7%</td></tr>
            <tr><td>üáßüá¨ Bu≈Çgaria</td><td class="r">18</td><td class="r">10</td><td class="r">4</td><td class="r">1</td><td class="r">0</td><td class="r"><strong>33</strong></td><td class="r">2.7%</td></tr>
            <tr><td>üá®üáøüá∏üá∞ Czechy+S≈Çowacja</td><td class="r">21</td><td class="r">5</td><td class="r">5</td><td class="r">2</td><td class="r">0</td><td class="r"><strong>33</strong></td><td class="r">2.7%</td></tr>
            <tr><td>üá¶üáπ Austria</td><td class="r">13</td><td class="r">7</td><td class="r">8</td><td class="r">1</td><td class="r">1</td><td class="r"><strong>30</strong></td><td class="r">2.4%</td></tr>
            <tr><td>üá¨üáß UK</td><td class="r">15</td><td class="r">7</td><td class="r">5</td><td class="r">3</td><td class="r">0</td><td class="r"><strong>30</strong></td><td class="r">2.4%</td></tr>
            <tr><td>üáÆüá± Izrael</td><td class="r">7</td><td class="r">7</td><td class="r">3</td><td class="r">1</td><td class="r">1</td><td class="r"><strong>19</strong></td><td class="r">1.5%</td></tr>
            <tr><td>üá™üá∏ Hiszpania</td><td class="r">3</td><td class="r">6</td><td class="r">4</td><td class="r">2</td><td class="r">1</td><td class="r"><strong>16</strong></td><td class="r">1.3%</td></tr>
            <tr><td>üá≥üá± Holandia</td><td class="r">7</td><td class="r">4</td><td class="r">3</td><td class="r">1</td><td class="r">0</td><td class="r"><strong>15</strong></td><td class="r">1.2%</td></tr>
            <tr><td>üáµüáπ Portugalia</td><td class="r">8</td><td class="r">0</td><td class="r">4</td><td class="r">0</td><td class="r">0</td><td class="r"><strong>12</strong></td><td class="r">1.0%</td></tr>
            <tr><td>üá≥üá¥ Norwegia</td><td class="r">5</td><td class="r">2</td><td class="r">3</td><td class="r">0</td><td class="r">0</td><td class="r"><strong>10</strong></td><td class="r">0.8%</td></tr>
            <tr><td>üáßüá™ Belgia</td><td class="r">0</td><td class="r">4</td><td class="r">3</td><td class="r">2</td><td class="r">0</td><td class="r"><strong>9</strong></td><td class="r">0.7%</td></tr>
            <tr><td>üåç Inne (16 kraj√≥w)</td><td class="r">26</td><td class="r">9</td><td class="r">8</td><td class="r">5</td><td class="r">2</td><td class="r"><strong>50</strong></td><td class="r">4.0%</td></tr>
          </tbody>
          <tfoot>
            <tr style="background:var(--bg-soft);font-weight:700">
              <td>RAZEM</td><td class="r">701</td><td class="r">252</td><td class="r">203</td><td class="r">59</td><td class="r">22</td><td class="r"><strong>1 237</strong></td><td class="r">100%</td>
            </tr>
          </tfoot>
        </table>
      </div>
      <p class="note">Diamond/Blue Diamond: weryfikacja 262 nazwisk (ka≈ºde przypisane do jednego kraju). Platinum: weryfikacja 252 nazwisk (90% pewno≈õƒá). Gold: estymacja z analizy 701 nazwisk (85% pewno≈õƒá). Razem = Gold+ per kraj (701 + 252 + 284 = 1237).</p>
    </div>
  </section>

  <!-- PYRAMID COMPARISON -->
  <section class="bg-soft" id="pyramid">
    <div class="w">
      <div class="section-head section-head--center anim">
        <div class="section-label">Por√≥wnanie rynk√≥w</div>
        <h2>Kszta≈Çt piramidy rang</h2>
        <p>Polska ro≈õnie "od do≈Çu" (59% Gold). Rumunia ma super-silny top (8% Blue Diamond+). Niemcy ‚Äî dojrza≈Çe i szerokie.</p>
      </div>

      <div class="pyramids anim">
        <div class="pyramid-card">
          <h3>üáµüá± Polska</h3>
          <p class="sub">78 lider√≥w Gold+ ‚Äî rynek rosnƒÖcy</p>
          <div class="pyr-row">
            <span class="pyr-label">Gold</span>
            <div class="pyr-bar-wrap"><div class="pyr-bar gold" data-w="100" style="width:0">59%</div></div>
          </div>
          <div class="pyr-row">
            <span class="pyr-label">Platinum</span>
            <div class="pyr-bar-wrap"><div class="pyr-bar plat" data-w="37" style="width:0">22%</div></div>
          </div>
          <div class="pyr-row">
            <span class="pyr-label">Diamond</span>
            <div class="pyr-bar-wrap"><div class="pyr-bar dia" data-w="22" style="width:0">13%</div></div>
          </div>
          <div class="pyr-row">
            <span class="pyr-label">Blue Dia.+</span>
            <div class="pyr-bar-wrap"><div class="pyr-bar bdia" data-w="10" style="width:0">6%</div></div>
          </div>
        </div>

        <div class="pyramid-card">
          <h3>üá©üá™ Niemcy</h3>
          <p class="sub">412 lider√≥w Gold+ ‚Äî rynek dojrza≈Çy</p>
          <div class="pyr-row">
            <span class="pyr-label">Gold</span>
            <div class="pyr-bar-wrap"><div class="pyr-bar gold" data-w="100" style="width:0">61%</div></div>
          </div>
          <div class="pyr-row">
            <span class="pyr-label">Platinum</span>
            <div class="pyr-bar-wrap"><div class="pyr-bar plat" data-w="31" style="width:0">19%</div></div>
          </div>
          <div class="pyr-row">
            <span class="pyr-label">Diamond</span>
            <div class="pyr-bar-wrap"><div class="pyr-bar dia" data-w="25" style="width:0">15%</div></div>
          </div>
          <div class="pyr-row">
            <span class="pyr-label">Blue Dia.+</span>
            <div class="pyr-bar-wrap"><div class="pyr-bar bdia" data-w="8" style="width:0">5%</div></div>
          </div>
        </div>

        <div class="pyramid-card">
          <h3>üá∑üá¥ Rumunia</h3>
          <p class="sub">238 lider√≥w Gold+ ‚Äî silny top</p>
          <div class="pyr-row">
            <span class="pyr-label">Gold</span>
            <div class="pyr-bar-wrap"><div class="pyr-bar gold" data-w="100" style="width:0">54%</div></div>
          </div>
          <div class="pyr-row">
            <span class="pyr-label">Platinum</span>
            <div class="pyr-bar-wrap"><div class="pyr-bar plat" data-w="43" style="width:0">23%</div></div>
          </div>
          <div class="pyr-row">
            <span class="pyr-label">Diamond</span>
            <div class="pyr-bar-wrap"><div class="pyr-bar dia" data-w="28" style="width:0">15%</div></div>
          </div>
          <div class="pyr-row">
            <span class="pyr-label">Blue Dia.+</span>
            <div class="pyr-bar-wrap"><div class="pyr-bar bdia" data-w="15" style="width:0">8%</div></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SILVER+ TABLE -->
  <section>
    <div class="w">
      <div class="section-head anim">
        <div class="section-label">Silver+ (estymacja)</div>
        <h2>Pe≈Çen obraz z danymi Silver</h2>
        <p>Silver (1920 os√≥b) nie majƒÖ kraj√≥w na stronie doTERRA. Estymacja na podstawie analizy wzorc√≥w nazwisk. Margines b≈Çƒôdu: ¬±15-20%.</p>
      </div>

      <div class="table-wrap anim">
        <table>
          <thead>
            <tr>
              <th>Kraj</th>
              <th class="r">Silver (est.)</th>
              <th class="r">Gold+ (pewne)</th>
              <th class="r">Razem</th>
              <th class="r">%</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><strong>üá©üá™ Niemcy</strong></td><td class="r">647</td><td class="r">412</td><td class="r"><strong>1 059</strong></td><td class="r"><strong>33.5%</strong></td></tr>
            <tr><td><strong>üá∑üá¥ Rumunia</strong></td><td class="r">409</td><td class="r">238</td><td class="r"><strong>647</strong></td><td class="r"><strong>20.5%</strong></td></tr>
            <tr><td>üá≠üá∫ Wƒôgry</td><td class="r">165</td><td class="r">91</td><td class="r"><strong>256</strong></td><td class="r">8.1%</td></tr>
            <tr class="row-highlight"><td><strong>üáµüá± Polska</strong></td><td class="r">98</td><td class="r">78</td><td class="r"><strong>176</strong></td><td class="r"><strong>5.6%</strong></td></tr>
            <tr><td>üáÆüáπ W≈Çochy</td><td class="r">91</td><td class="r">60</td><td class="r"><strong>151</strong></td><td class="r">4.8%</td></tr>
            <tr><td>üá®üá≠ Szwajcaria</td><td class="r">74</td><td class="r">55</td><td class="r"><strong>129</strong></td><td class="r">4.1%</td></tr>
            <tr><td>üá´üá∑ Francja</td><td class="r">69</td><td class="r">46</td><td class="r"><strong>115</strong></td><td class="r">3.6%</td></tr>
            <tr><td>üá¶üáπ Austria</td><td class="r">61</td><td class="r">30</td><td class="r"><strong>91</strong></td><td class="r">2.9%</td></tr>
            <tr><td>üá¨üáß UK</td><td class="r">56</td><td class="r">30</td><td class="r"><strong>86</strong></td><td class="r">2.7%</td></tr>
            <tr><td>üáßüá¨ Bu≈Çgaria</td><td class="r">38</td><td class="r">33</td><td class="r"><strong>71</strong></td><td class="r">2.2%</td></tr>
            <tr><td>üåç Inne</td><td class="r">212</td><td class="r">164</td><td class="r"><strong>376</strong></td><td class="r">11.9%</td></tr>
          </tbody>
          <tfoot>
            <tr style="background:var(--bg-soft);font-weight:700">
              <td>RAZEM</td><td class="r">1 920</td><td class="r">1 237</td><td class="r"><strong>3 157</strong></td><td class="r">100%</td>
            </tr>
          </tfoot>
        </table>
      </div>
      <p class="note">Silver: estymacja z analizy 1920 nazwisk (85% pewno≈õƒá). Gold: estymacja z analizy 701 nazwisk (85% pewno≈õƒá). Platinum: weryfikacja 252 nazwisk (90%). Diamond+: weryfikacja 284 nazwisk (100%).</p>
    </div>
  </section>

  <!-- TIMELINE -->
  <section class="bg-soft">
    <div class="w">
      <div class="section-head anim">
        <div class="section-label">Historia</div>
        <h2>doTERRA w Europie ‚Äî timeline</h2>
      </div>
      <div class="timeline anim">
        <div class="tl-item"><div class="tl-dot"></div><div class="tl-year">2008</div><div class="tl-text"><strong>Za≈Ço≈ºenie doTERRA</strong> w Pleasant Grove, Utah. 25 olejk√≥w na start.</div></div>
        <div class="tl-item"><div class="tl-dot"></div><div class="tl-year">2009</div><div class="tl-text">Rejestracja <strong>DOTERRA (EUROPE) LTD</strong> w Wielkiej Brytanii.</div></div>
        <div class="tl-item"><div class="tl-dot"></div><div class="tl-year">2016</div><div class="tl-text">Otwarcie <strong>Esseterre Bulgaria</strong> ‚Äî zak≈Çad destylacji surowc√≥w.</div></div>
        <div class="tl-item"><div class="tl-dot"></div><div class="tl-year">2018</div><div class="tl-text">Biuro w Milton Keynes (UK).</div></div>
        <div class="tl-item"><div class="tl-dot active"></div><div class="tl-year">2019</div><div class="tl-text"><strong>Grand opening biura w Monachium</strong> ‚Äî kluczowy moment dla rynku DACH.</div></div>
        <div class="tl-item"><div class="tl-dot"></div><div class="tl-year">2020</div><div class="tl-text"><strong>Fabryka w Cork</strong> (Irlandia) + <strong>call center w Budapeszcie</strong> (Wƒôgry).</div></div>
        <div class="tl-item"><div class="tl-dot active"></div><div class="tl-year">2025</div><div class="tl-text"><strong>Elevated Compensation Plan</strong> ‚Äî Rank Compression, PO3 Boost, Team Growth Volume.</div></div>
        <div class="tl-item"><div class="tl-dot active"></div><div class="tl-year">2026</div><div class="tl-text"><strong>Konwencja Europe w Katowicach</strong> ‚Äî Arena Spodek, maj 2026.</div></div>
      </div>
    </div>
  </section>

  <!-- COMP PLAN -->
  <section>
    <div class="w">
      <div class="section-head section-head--center anim">
        <div class="section-label">Elevated Compensation Plan 2025</div>
        <h2>Nowy plan kompensacyjny</h2>
        <p>Wdro≈ºony 1 czerwca 2025. Nowe zasady awansu i wynagradzania.</p>
      </div>
      <div class="stats-row anim">
        <div class="stat-card">
          <div class="stat-value" style="font-size:1.4rem;color:var(--purple)">Rank Compression</div>
          <div class="stat-label">Elastyczniejsza kwalifikacja na wy≈ºszƒÖ rangƒô</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" style="font-size:1.4rem;color:var(--green)">PO3 Boost</div>
          <div class="stat-label">Zwiƒôkszone bonusy Power of 3</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" style="font-size:1.4rem;color:var(--blue)">TGV</div>
          <div class="stat-label">Nowa metryka aktywno≈õci zespo≈Çu</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" style="font-size:1.4rem;color:var(--amber)">Performance Pool</div>
          <div class="stat-label">Platinum dodany do puli</div>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="w">
      <div class="footer-inner">
        <span>Aromagic ‚Äî Analiza rynku doTERRA Europa, luty 2026</span>
        <span>Dokument wewnƒôtrzny</span>
      </div>
    </div>
  </footer>

  <script>
    // Scroll animations
    const obs = new IntersectionObserver(entries => {
      entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('in'); });
    }, { threshold: 0.1 });
    document.querySelectorAll('.anim').forEach(el => obs.observe(el));

    // Animate bars on scroll
    const barObs = new IntersectionObserver(entries => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          e.target.querySelectorAll('[data-w]').forEach(bar => {
            setTimeout(() => { bar.style.width = bar.dataset.w + '%'; }, 100);
          });
        }
      });
    }, { threshold: 0.2 });
    document.querySelectorAll('.pyramids').forEach(el => barObs.observe(el));

    // --- Rank chart ---
    const colors = {
      Niemcy:'var(--purple)', Rumunia:'#5C6BC0', Szwajcaria:'#26A69A',
      Polska:'var(--green)', 'Wƒôgry':'var(--amber)', Austria:'#EF5350',
      'W≈Çochy':'#42A5F5', Francja:'#AB47BC', Hiszpania:'#FF7043',
      Belgia:'#8D6E63', UK:'#EC407A', Izrael:'#66BB6A',
      'S≈Çowacja':'#29B6F6', Holandia:'#26C6DA', 'Bu≈Çgaria':'#78909C',
      Norwegia:'#1E88E5', Portugalia:'#FFA726', Cypr:'#7E57C2',
      Ukraina:'#FFCA28'
    };
    const OTHER = '#BDBDBD';

    const datasets = {
      gold: {
        label: 'Rozk≈Çad Gold+',
        desc: '1237 lider√≥w Gold+. Gold: estymacja z nazwisk. Platinum/Diamond+: dane zweryfikowane.',
        note: '≈πr√≥d≈Ço: doterra.com/ME/en_ME ‚Äî strony Recognition. Gold: estymacja z 701 nazwisk (85%). Platinum: weryfikacja 252 nazwisk (90%). Diamond+: weryfikacja 284 nazwisk (100%). Luty 2026.',
        data: [
          ['Niemcy',412],['Rumunia',238],['Wƒôgry',91],['Polska',78],
          ['W≈Çochy',60],['Szwajcaria',55],['Francja',46],['Bu≈Çgaria',33],
          ['S≈Çowacja',33],['Austria',30],['UK',30],['Izrael',19],
          ['Hiszpania',16],['Holandia',15],['Portugalia',12],['Norwegia',10],
          ['Inne (17)',59]
        ]
      },
      platinum: {
        label: 'Rozk≈Çad Platinum+',
        desc: '536 lider√≥w Platinum+. Dane z oficjalnych stron doTERRA + weryfikacja nazwisk.',
        note: '≈πr√≥d≈Ço: doterra.com/ME/en_ME ‚Äî strony Recognition (Platinum, Diamond, Blue Diamond, Presidential Diamond, Double Presidential/Diamond). Platinum: weryfikacja 252 nazwisk. Diamond+: weryfikacja 284 nazwisk. Dane pobrane luty 2026.',
        data: [
          ['Niemcy',161],['Rumunia',110],['Szwajcaria',39],['Polska',32],
          ['Wƒôgry',29],['W≈Çochy',19],['Austria',17],['Bu≈Çgaria',15],
          ['UK',15],['Hiszpania',13],['Francja',12],['Izrael',12],
          ['S≈Çowacja',12],['Belgia',9],['Holandia',8],['Ukraina',6],
          ['Inne (11)',27]
        ]
      },
      diamond: {
        label: 'Rozk≈Çad Diamond+',
        desc: '284 lider√≥w Diamond+. Weryfikacja 284 nazwisk (ka≈ºde przypisane do jednego kraju).',
        note: '≈πr√≥d≈Ço: doterra.com/ME/en_ME ‚Äî strony Recognition (Diamond, Blue Diamond, Presidential Diamond, Double Presidential Diamond, Double Diamond). Weryfikacja 284 nazwisk. Dane pobrane luty 2026.',
        data: [
          ['Niemcy',82],['Rumunia',54],['Szwajcaria',28],['Wƒôgry',17],
          ['Polska',15],['Austria',10],['W≈Çochy',9],['UK',8],
          ['Hiszpania',7],['S≈Çowacja',7],['Francja',6],['Belgia',5],
          ['Izrael',5],['Bu≈Çgaria',5],['Cypr',5],['Holandia',4],
          ['Inne (11)',17]
        ]
      },
      silver: {
        label: 'Rozk≈Çad Silver+',
        desc: '3157 lider√≥w Silver+.',
        note: 'Silver: estymacja z 1920 nazwisk (¬±10-15%). Gold: estymacja z 701 nazwisk (85%). Platinum/Diamond+: dane zweryfikowane. ≈πr√≥d≈Ço: doterra.com/ME/en_ME. Luty 2026.',
        data: [
          ['Niemcy',1059],['Rumunia',647],['Wƒôgry',256],['Polska',176],
          ['W≈Çochy',151],['Szwajcaria',129],['Francja',115],['Austria',91],
          ['UK',86],['Bu≈Çgaria',71],['S≈Çowacja',66],['Holandia',38],
          ['Izrael',36],['Portugalia',35],['Norwegia',34],['Ukraina',33],
          ['Inne (17)',134]
        ]
      }
    };

    const chartEl = document.getElementById('rankChart');
    const labelEl = document.getElementById('chartLabel');
    const descEl = document.getElementById('chartDesc');
    const noteEl = document.getElementById('chartNote');

    function renderChart(rank) {
      const ds = datasets[rank];
      const max = Math.max(...ds.data.map(d => d[1]));
      labelEl.textContent = ds.label;
      descEl.textContent = ds.desc;
      noteEl.textContent = ds.note;

      const inneTooltips = {
        silver: '<span class="tooltip-box">' +
          'Hiszpania (31), Belgia (19), Dania (13),<br>' +
          'Mo≈Çdawia (12), S≈Çowenia (11), Cypr (7),<br>' +
          '11 inn. (37)' +
          '</span>',
        gold: '<span class="tooltip-box">' +
          'Belgia (9), Ukraina (9), Dania (7),<br>' +
          'Cypr (7), Mo≈Çdawia (6), S≈Çowenia (5),<br>' +
          '11 inn. (12)' +
          '</span>',
        platinum: '<span class="tooltip-box">' +
          'Cypr (6), Norwegia (5), Portugalia (4),<br>' +
          'Dania (3), S≈Çowenia (3), 6 inn. (2)' +
          '</span>',
        diamond: '<span class="tooltip-box">' +
          'Portugalia (4), Norwegia (3), Dania (2),<br>' +
          'Chorwacja, S≈Çowenia, Serbia, Irlandia,<br>' +
          'Malta, Estonia, Ukraina, Mo≈Çdawia (zb. 4)' +
          '</span>'
      };
      const inneTooltip = inneTooltips[rank];
      const total = ds.data.reduce((s, d) => s + d[1], 0);
      chartEl.innerHTML = ds.data.map(([name, val]) => {
        const w = (val / max * 100).toFixed(1);
        const bg = colors[name] || OTHER;
        const isInne = name.startsWith('Inne');
        return '<div class="chart-row' + (isInne ? ' row-tooltip' : '') + '">' +
          (isInne ? inneTooltip : '') +
          '<span class="chart-country">' + name + '</span>' +
          '<div class="chart-bar-wrap"><div class="chart-bar" style="width:0;background:' + bg + '" data-w="' + w + '"></div></div>' +
          '<span class="chart-val">' + val + '</span>' +
          '</div>';
      }).join('') +
      '<div class="chart-row chart-total">' +
        '<span class="chart-country">RAZEM</span>' +
        '<div></div>' +
        '<span class="chart-val">' + total + '</span>' +
      '</div>';

      // Animate after DOM update
      requestAnimationFrame(() => {
        chartEl.querySelectorAll('[data-w]').forEach(bar => {
          setTimeout(() => { bar.style.width = bar.dataset.w + '%'; }, 50);
        });
      });
    }

    // Tab clicks
    document.querySelectorAll('.chart-tab').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.chart-tab').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderChart(btn.dataset.rank);
      });
    });

    // Initial render
    renderChart('silver');

    // --- Stacked chart ---
    const stackedData = [
      { name:'Niemcy', silver:647, gold:251, platinum:79, diamond:82 },
      { name:'Rumunia', silver:409, gold:128, platinum:56, diamond:54 },
      { name:'Wƒôgry', silver:165, gold:62, platinum:12, diamond:17 },
      { name:'Polska', silver:98, gold:46, platinum:17, diamond:15 },
      { name:'W≈Çochy', silver:91, gold:41, platinum:10, diamond:9 },
      { name:'Szwajcaria', silver:74, gold:16, platinum:11, diamond:28 },
      { name:'Francja', silver:69, gold:34, platinum:6, diamond:6 },
      { name:'Austria', silver:61, gold:13, platinum:7, diamond:10 },
      { name:'UK', silver:56, gold:15, platinum:7, diamond:8 },
      { name:'Bu≈Çgaria', silver:38, gold:18, platinum:10, diamond:5 },
      { name:'S≈Çowacja', silver:33, gold:21, platinum:5, diamond:7 },
      { name:'Holandia', silver:23, gold:7, platinum:4, diamond:4 },
      { name:'Izrael', silver:17, gold:7, platinum:7, diamond:5 },
      { name:'Portugalia', silver:23, gold:8, platinum:0, diamond:4 },
      { name:'Norwegia', silver:24, gold:5, platinum:2, diamond:3 },
      { name:'Ukraina', silver:24, gold:3, platinum:5, diamond:1 },
      { name:'Inne', silver:68, gold:26, platinum:14, diamond:26 }
    ];

    const stackedEl = document.getElementById('stackedChart');
    const maxTotal = Math.max(...stackedData.map(d => d.silver + d.gold + d.platinum + d.diamond));
    const grandTotal = stackedData.reduce((s, d) => s + d.silver + d.gold + d.platinum + d.diamond, 0);

    stackedEl.innerHTML = stackedData.map(d => {
      const total = d.silver + d.gold + d.platinum + d.diamond;
      const barW = (total / maxTotal * 100).toFixed(1);
      let segs;
      if (d.inne) {
        segs = '<div class="stacked-seg inne" data-sw="100"></div>';
      } else {
        segs = ['silver','gold','platinum','diamond'].map(r => {
          const pct = (d[r] / total * 100).toFixed(1);
          return '<div class="stacked-seg ' + r + '" data-sw="' + pct + '"></div>';
        }).join('');
      }
      const segLabels = ['silver','gold','platinum','diamond'].map(r => {
        const label = r === 'diamond' ? 'Diamond+' : r.charAt(0).toUpperCase() + r.slice(1);
        return label + ': ' + d[r];
      }).join(', ');
      const tooltip = '<span class="tooltip-box">' + d.name + ': ' + segLabels + '</span>';
      return '<div class="stacked-row row-tooltip">' +
        tooltip +
        '<span class="stacked-country">' + d.name + '</span>' +
        '<div style="width:' + barW + '%"><div class="stacked-bar">' + segs + '</div></div>' +
        '<span class="stacked-val">' + total + '</span>' +
        '</div>';
    }).join('') +
    '<div class="stacked-row stacked-total">' +
      '<span class="stacked-country">RAZEM</span><div></div>' +
      '<span class="stacked-val">' + grandTotal + '</span>' +
    '</div>';

    // Animate stacked segments on scroll
    const stackedObs = new IntersectionObserver(entries => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          e.target.querySelectorAll('[data-sw]').forEach(seg => {
            setTimeout(() => { seg.style.width = seg.dataset.sw + '%'; }, 100);
          });
        }
      });
    }, { threshold: 0.2 });
    stackedObs.observe(stackedEl);
  </script>

</body>
</html>
